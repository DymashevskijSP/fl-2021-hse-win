# Язык [EBNF](lang/EBNF.md) + особенности синтаксиса 1 и 2

Наша задача состояла в:
* Разработке конкретного синтаксиса по абстрактному синтаксису EBNF
* Реализации парсера, определяющего является ли данное описание грамматики в EBNF корректным
* Поддержке многострочных вложенных комментариев
* Поддержке чувствительность к индентации
* Реализации расширения для поддержки нашего языка в среде разработки

## Синтаксис языка

Грамматика записанная на нашем языке имеет следующий вид: в одной или нескольких строчках записано правило вида: A = B, где A - идентификатор(название правила), а B - выражение, соответствующая правилам РБНФ комбинация терминальных и нетерминальных символов и специальных знаков.

Могут встречаться следующие операторы:

 * {A} - 0 или больше повторений агрумента A
 * \[A\] - опциональный оператор (0 или 1 вхождение аргумента A)
 * A,B - конкатенация двух аргументов
 * A|B - альтернатива(либо A либо B)
 * (A) - скобки для группировки
 
Аргументами данных операторов могут быть терминалы в одинарных кавычках или выражения. Если в имени терминала или нетерминала присутствует зарезервированный символ его нужно экранировать обратной косой чертой.

Если пользователь хочет записать правило в нескольких строках, то на каждой новой строке, в которой продолжается правило, запись начинается с отступа в 4 пробельных символа. Перенос возможен либо после запятой либо после оператора ИЛИ.

Язык поддерживает многострочные вложенные комментарии, которые начинаются на /* и заканчиваются */. Комментарии можно писать между двумя правилами вида A = B, либо в конце входного файла.

### Примеры программ:

```
A=(B|C),['aaa']
B='aaa'|'bbb'
C='\{\}'
```

```
A=['a'],{'b'},
    ['c']
```

```
A="abacaba"
/*your
comment
here
*/
B="cabaaba"

```

## Синтаксический анализатор

Для реализации синтаксического анализатора была выбрана библиотека PLY и ее инструменты lex и yacc для лексинга и парсинга соотвественно. Данная библиотека была выбрана, так как имеет хорошую документацию и доступные примеры, а так же является легкой в использовании. 

В ходе работы над синтаксическим анализатором мы столкнулись с двумя сложными задачами:

* Вложенные многострочные комментарии обрабатываются на этапе лексинга, то есть каждый такой комментарий это отдельная лексема. Регулярное выражение матчит часть комментария, одновременно считая количество открывающих и закрывающих символов, как в проверке ПСП.

* Отступы в 4 символа в начале строки используются для продолжения формулы, начатой на более ранних строках. Для реализации данной синтансической особенности в лексере есть специальный токен INDENT, а в парсере отступы в допустимых местах учитываются в грамматике.

```
python3 parser.py
```

## Поддержка в среде разработки
Написано расширение для поддержки языка в VSCode.

* Подсветка терминалов, нетерминалов, операторов
* Автодополнение операторов, которые представляют собой парные символы(скобки, кавычки)
* Подсветка кода обернутого скобками или кавычками при наведении курсора

## Разделение обязанностей

Трофимова Кристина:

* Реализация парсера
* Автодополнение 
* Написание отчета по проделанной работе

Дымашевский Сергей:

* Реализация лексера
* Подсветка кода 
* Тесты


